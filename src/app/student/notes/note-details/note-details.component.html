<div class="addContainer">

  <!-- ===== HEADER ===== -->
  <div class="modalHeader">
    <div class="modalTitle">{{ note.title }}</div>
    <button mat-icon-button (click)="onCancel()">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <!-- ===== CONTENT ===== -->
  <div mat-dialog-content>
    <div class="quill-container-readonly">
      <quill-editor
        [ngModel]="note.content"
        [modules]="quillEditorModules"
        [readOnly]="true">
      </quill-editor>
    </div>
  </div>

  <!-- ===== LANGUAGE TOGGLE ===== -->
  <div class="language-toggle">
    <label>
      <input type="radio" name="lang" value="english" [(ngModel)]="selectedLang" />
      English
    </label>

    <label>
      <input type="radio" name="lang" value="hinglish" [(ngModel)]="selectedLang" />
      Hinglish
    </label>
  </div>

  <!-- ===== FOOTER ACTIONS (DROPDOWN) ===== -->
  <div mat-dialog-actions class="modal-actions">

    <!-- Dropdown Trigger -->
    <button
      mat-stroked-button
      color="primary"
      [matMenuTriggerFor]="noteActionsMenu">
      Actions
      <mat-icon>arrow_drop_up</mat-icon>
    </button>

    <!-- Dropdown Menu -->
    <mat-menu #noteActionsMenu="matMenu">

      <button mat-menu-item (click)="previousChunk()">
        <mat-icon>skip_previous</mat-icon>
        <span>Previous</span>
      </button>

      <button mat-menu-item (click)="speakWithAI()" [disabled]="isLoading">
        <mat-icon>smart_toy</mat-icon>
        <span>Explain with AI</span>
      </button>

      <button mat-menu-item (click)="nextChunk()">
        <mat-icon>skip_next</mat-icon>
        <span>Next</span>
      </button>

      <mat-divider></mat-divider>

      <button mat-menu-item (click)="onRevisionComplete()" [disabled]="isLoading">
        <mat-icon color="primary">check_circle</mat-icon>
        <span>Revision Complete</span>

        @if (isLoading) {
          <mat-progress-spinner
            diameter="18"
            mode="indeterminate">
          </mat-progress-spinner>
        }
      </button>

    </mat-menu>

  </div>
</div>
